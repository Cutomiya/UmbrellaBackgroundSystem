name: Build and Deploy
on:
  push:
    branches:
      - main
permissions:
  contents: write
jobs:
  # 一个job任务，任务名为build
  build:
    # runs-on 指定job任务运行所需要的虚拟机环境(必填字段)
    runs-on: ubuntu-latest
    # steps是每个Job的运行步骤，可以包含一个或多个步骤
    steps:
      # action命令，切换分支获取源码
      - name: Checkout
        # 使用action库  actions/checkout获取源码
        uses: actions/checkout@main
      # action命令，安装Node10
      - name: use Node.js 18
        # 使用action库  actions/setup-node安装node
        uses: actions/setup-node@v1
        with:
          node-version: 18
      # action命令，install && test
      - name: npm install and test
        # 运行的命令或者 action
        run: |
          npm install
          npm run dev
        # 环境变量
        env:
          CI: true
# name: GitHub Actions Build and Deploy Demo
# on:
#   push:
#     branches:
#       - main
# jobs:
#   build-and-deploy:
#     runs-on: ubuntu-latest
#     steps:
#     - name: Checkout
#       uses: actions/checkout@master

#     - name: Build and Deploy
#       uses: JamesIves/github-pages-deploy-action@master
#       env:
#         ACCESS_TOKEN: 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
#         BRANCH: gh-pages
#         FOLDER: build
#         BUILD_SCRIPT: npm install && npm run build